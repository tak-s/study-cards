# StudyCards

![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.10+-blue.svg)
![Flask](https://img.shields.io/badge/Flask-2.3.3-green.svg)

あらゆる学習内容（漢字、英単語、歴史、理科など）の暗記を支援するWEBアプリケーションです。

## 🌟 主な特徴

- **シンプルなデータ管理**: 質問と回答のシンプルな学習
- **習熟度管理**: 正解・不正解を記録し、習熟度に基づいた効率的な学習をサポート
- **汎用性**: 漢字、英単語、歴史、理科、数学など、あらゆる暗記学習に対応
- **シンプル**: 統一フォーマット「質問,回答」で管理が簡単（習熟度データは自動管理）
- **インタラクティブ学習**: ブラウザ上でのクイズ練習機能
- **印刷対応**: A4サイズの表形式PDFで出力、そのまま印刷して使用可能
- **範囲指定出題**: データセットの特定範囲から問題を生成
- **柔軟な選択方法**: ランダム選択と順番選択の両方に対応
- **日本語完全対応**: 漢字・ひらがな・カタカナが正しく表示
- **レスポンシブ**: スマートフォンやタブレットでも使用可能

## 📸 スクリーンショット

![StudyCards Screenshot1](resources/screenshot1.png)
![StudyCards Screenshot2](resources/screenshot2.png)

## 機能

### データセット管理機能
- テーマごとにデータセットを作成
- 統一フォーマット: 質問と回答のシンプルなペア
- 漢字、英単語、歴史年号、理科用語など、どんな内容でも対応
- CSV形式でデータを管理（外部編集可能）
- データのインポート/エクスポート機能
- **習熟度の自動管理**: 正解・不正解の記録と視覚化

### インタラクティブ学習機能
- **手動テスト結果入力**: 印刷したテストの結果を入力して習熟度を管理
- **習熟度の自動計算**: 正解・不正解の記録から習熟度スコアを自動算出
- **視覚的な習熟度表示**: 色分けされたプログレスバーで学習状況を把握
  - 🟢 緑: 80%以上（習得済み）
  - 🟡 黄: 60-79%（学習中）
  - 🔴 赤: 60%未満（要練習）
- **一括操作機能**: 全問正解・全問不正解・全てクリアのボタンで効率的な入力

### 問題作成機能
- データセットからランダムまたは順番に問題を生成
- デフォルト50問（1～データセット全体まで設定可能）
- **問題化対象範囲の指定**: 開始位置と終了位置を指定して特定の範囲から出題
- **選択方法の選択**: ランダム選択または順番選択を選択可能
- A4サイズでPDF出力（印刷対応、表形式）
- 問題タイプの選択可能
  - 質問→回答（デフォルト）
  - 回答→質問
- 大量問題対応（50問を超える場合は複数ページ自動生成）

### WEBアプリ機能
- 直感的なユーザーインターフェース
- レスポンシブデザイン（モバイル対応）
- フラッシュメッセージでの操作フィードバック
- 日本語フォント完全対応

## 🚀 クイックスタート

### 自動セットアップ（推奨）

**Linux/macOS:**
```bash
git clone https://github.com/tak-s/study-cards.git
cd study-cards
chmod +x setup.sh
./setup.sh
```

**Windows:**
```bash
git clone https://github.com/tak-s/study-cards.git
cd study-cards
setup.bat
```

### 手動セットアップ

1. **リポジトリのクローン**
```bash
git clone https://github.com/tak-s/study-cards.git
cd study-cards
```

2. **仮想環境の作成と有効化**

**Linux/macOS:**
```bash
python -m venv venv
source venv/bin/activate
```

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

3. **依存関係のインストール**
```bash
pip install -r requirements.txt
```

4. **アプリケーションの起動**
```bash
python app.py
```

5. **ブラウザでアクセス**
```
http://localhost:5000
```

## 📚 使い方

### 1. データセットの作成
1. 「新しいデータセット」をクリック
2. データセット名を入力（例：中学1年漢字、英検3級単語、日本史年号など）
3. 「作成」をクリック

### 2. データの追加
1. 作成したデータセットの「編集」をクリック
2. 質問と回答のペアを入力
   - 漢字学習例：質問「大」→ 回答「だい」
   - 英単語例：質問「school」→ 回答「学校」
   - 歴史例：質問「関ヶ原の戦い」→ 回答「1600年」
3. 必要に応じてCSVファイルを直接編集

### 3. 学習方法の選択
1. **インタラクティブ学習**: 「クイズ練習」をクリックしてブラウザ上で学習
   - 習熟度に基づいた効率的な出題
   - リアルタイムでの進捗追跡
   - 色分けされた習熟度表示
2. **印刷学習**: 「問題作成」をクリックしてPDF形式で印刷学習

### 4. 問題の生成（印刷用）
### 4. 問題の生成（印刷用）
1. データセットの「問題作成」をクリック
2. 問題数を設定（デフォルト50問）
3. **問題化対象範囲を設定**（オプション）
   - 開始位置：出題範囲の開始位置を指定（空欄の場合は最初から）
   - 終了位置：出題範囲の終了位置を指定（空欄の場合は最後まで）
4. **問題選択方法を選択**
   - ランダム選択：指定範囲からランダムに問題を選択
   - 順番選択：指定範囲から順番に問題を選択
5. 問題タイプを選択
   - 質問→回答（デフォルト）
   - 回答→質問
6. 「PDFを生成・ダウンロード」をクリック

### 5. 習熟度管理（手動入力）
1. データセットの「結果入力」をクリック
2. 印刷したテストの結果を問題ごとに入力
   - 正解: 習熟度スコアが向上
   - 不正解: 試行回数が増加、継続的な学習が必要
3. 一括選択機能で効率的に入力
4. 結果を保存して習熟度データを更新

## 📁 プロジェクト構成

```
study-cards/
├── app.py                      # メインアプリケーション
├── requirements.txt            # 本番用依存関係
├── requirements-dev.txt        # 開発用依存関係（flake8、pip-audit等）
├── README.md                   # このファイル
├── LICENSE                     # MITライセンス
├── SECURITY.md                 # セキュリティガイド
├── CONTRIBUTING.md             # 貢献ガイド
├── SETUP.md                    # 詳細セットアップガイド
├── setup.sh                    # Linux/macOS用セットアップ
├── setup.bat                   # Windows用セットアップ
├── templates/                  # HTMLテンプレート
│   ├── base.html              # ベーステンプレート
│   ├── index.html             # ホームページ
│   ├── create_dataset.html    # データセット作成ページ
│   ├── edit_dataset.html      # データセット編集ページ（習熟度表示対応）
│   ├── generate_quiz.html     # 問題生成ページ
│   ├── import_dataset.html    # データインポートページ
│   └── input_results.html     # 手動結果入力ページ（習熟度管理）
└── datasets/                   # データセット保存ディレクトリ
    ├── 英単語.csv             # サンプル英単語データ
    └── 世界の国と首都.csv     # サンプル地理データ
```

## CSV形式について

### 基本フォーマット（推奨）
すべてのデータセットは「質問,回答」の基本フォーマットで管理されます。習熟度データは自動的に管理されるため、手動で入力する必要はありません。

```csv
質問,回答
大,だい
小,しょう
学校,がっこう
```

または英語ヘッダー版：
```csv
question,answer
school,学校
teacher,先生
apple,りんご
```

### 拡張フォーマット（習熟度データ含む）
エクスポート時や高度な用途では、習熟度データを含む拡張フォーマットが使用されます：

```csv
質問,回答,正解数,総試行回数,習熟度スコア
大,だい,8,10,0.8
小,しょう,5,8,0.625
学校,がっこう,2,3,0.667
```

### インポート時の互換性
- **基本フォーマット**: 習熟度データが自動的に初期値（0, 0, 0.0）で追加されます
- **拡張フォーマット**: 既存の習熟度データがそのまま保持されます
- **旧形式**: 古いCSVファイルも自動的に新形式に変換されます

**重要**: CSVファイルには正解・不正解の情報を手動で入力する必要はありません。クイズ練習機能を使用することで、習熟度データは自動的に記録・更新されます。

### 使用例

**漢字学習データセット:**
```csv
質問,回答
大,だい
学校,がっこう
先生,せんせい
```

**英単語学習データセット:**
```csv
質問,回答
school,学校
teacher,先生
student,学生
```

**使用例**: 基本単語（開始位置1、終了位置2）から出題したり、ランダム選択でバランス良く学習できます。

**歴史学習データセット:**
```csv
質問,回答
関ヶ原の戦い,1600年
江戸幕府開始,1603年
明治維新,1868年
```

**使用例**: 範囲指定で「江戸時代」の部分（開始位置2、終了位置2）から1問出題したり、順番選択で時系列順に問題を生成できます。

**理科学習データセット:**
```csv
質問,回答
水の化学式,H2O
酸素の化学記号,O
炭素の化学記号,C
```

## 特徴

- **汎用性**: 漢字、英単語、歴史、理科、数学など、あらゆる暗記学習に対応
- **統一フォーマット**: シンプルな「質問,回答」形式で管理が簡単
- **習熟度の自動管理**: 手動テスト結果入力により学習進捗を自動追跡
- **インタラクティブ学習**: 結果入力機能による習熟度管理
- **手軽なデータ管理**: CSV形式なのでExcelやテキストエディタで編集可能
- **印刷対応**: A4サイズの表形式PDFで出力、そのまま印刷して使用可能
- **範囲指定出題**: データセットの特定範囲から問題を生成可能
- **柔軟な選択方法**: ランダム選択と順番選択の両方に対応
- **大量問題対応**: 50問を超える場合は自動で複数ページに分割
- **柔軟な問題設定**: 問題数や出題方向を自由に設定
- **日本語完全対応**: 漢字・ひらがな・カタカナが正しく表示
- **レスポンシブデザイン**: スマートフォンやタブレットでも使用可能
- **データインポート/エクスポート**: 既存データの再利用が簡単
- **後方互換性**: 古いCSVファイルも自動的に新形式に対応

### PDF生成時に日本語が表示されない場合
システムに日本語フォントがインストールされていない可能性があります。以下のパッケージをインストールしてください：

**Ubuntu/Debian:**
```bash
sudo apt-get install fonts-dejavu-core
```

**CentOS/RHEL:**
```bash
sudo yum install dejavu-sans-fonts
```

### ポート5000が使用中の場合
app.pyの最後の行を編集してポート番号を変更してください：
```python
app.run(debug=True, host='0.0.0.0', port=5001)  # ポート番号を変更
```

## 🔒 セキュリティ

本番環境で使用する場合は、[SECURITY.md](SECURITY.md) を必ずお読みください。

## 🤝 貢献

プロジェクトへの貢献を歓迎します！詳細は [CONTRIBUTING.md](CONTRIBUTING.md) をご覧ください。

## 📄 ライセンス

このプロジェクトは[MITライセンス](LICENSE)の下で公開されています。

## 🆘 サポート・質問

- バグ報告: [Issues](https://github.com/tak-s/study-cards/issues)
- 機能要求: [Issues](https://github.com/tak-s/study-cards/issues)
- 質問: [Discussions](https://github.com/tak-s/study-cards/discussions)

## ⚠️ 注意事項

- datasets内のサンプルデータは学習目的で用意したものではありません。実際に使用する際は、適切なデータセットを用意してください。
- 本番環境で使用する際は適切なセキュリティ設定を行ってください
- 大量のデータを扱う場合はサーバーのリソースにご注意ください
